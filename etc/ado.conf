#!/usr/bin/perl
use strict;
use warnings;
use utf8;

#This is the Ado (Mojolicious) application configuration file.
#Application instance is also available here via "app" Mojolicious specific keyword.

#The operating mode for your application, defaults to a value
#from the MOJO_MODE and PLACK_ENV environment variables or 'development'.
#See http://mojolicio.us/perldoc/Mojolicious/#mode
#Uncomment the line below to change it to 'production'.
#app->mode('production');

#Fallback to some default secret for this deployment
#See http://mojolicio.us/perldoc/Mojolicious/#secret
app->secret(Mojo::Util::sha1_sum(app->mode . app->home));

#Application specific templates
#See http://mojolicio.us/perldoc/Mojolicious/Renderer#paths
#unshift @{app->renderer->paths}, app->home->rel_dir('/path/to/my/templates');

#Application specific static files
#See http://mojolicio.us/perldoc/Mojolicious/Static
#It is better to leave static files to be served by a server like Apache
#This setting can be used during development.
#unshift @{$app->static->paths},   app->home->rel_dir('path/to/other/public/files');


#Setting the Controller class from which all conthrollers must inherit.
#See http://mojolicio.us/perldoc/Mojolicious/#controller_class
#See http://mojolicio.us/perldoc/Mojolicious/Guides/Growing#Controller_class
app->controller_class('Ado::Control');

#Namespace(s) to load controllers from
#See http://mojolicio.us/perldoc/Mojolicious#routes
#See
app->routes->namespaces(['Ado::Control']);

# Add custom MIME type
#See http://mojolicio.us/perldoc/Mojolicious/#types
#app->types->type(twt => 'text/tweet');

my $config = {

    #Plugins can be Mojolicious and Ado plugins.
    #Every Ado::Plugin:: ISA Mojolicious::Plugin
    plugins => {

    },

    #Configuration for commands
    #Every Ado::Command:: ISA Mojolicious::Command
    commands => {

    },
    routes => {

        #Automatically dispatching to the special stash values
        #'controller' and 'action', trying to match a class and a method
        #http://localhost:3000/perldoc/Mojolicious/Guides/Routing#Stash
        #http://localhost:3000/perldoc/Mojolicious/Guides/Routing#Special_stash_values

        #Back-office (administration and employess) controllers
        '/ado' => {
            order => -97,
            via   => [qw(GET POST PUT OPTIONS)],

            #Ado::Control::Ado::Default
            to => 'ado-default#index'
        },

        #Any front-end controllers
        '/:controller' => {
            order => 101,
            to    => {

                #Ado::Control::Default
                controller => 'Default',
                action     => 'index'
            }
        },
        '/:controller/:action/:id' => {
            order => 102,
            to    => {

                #Ado::Control::Default
                controller => 'Default',
                action     => 'form'
            }
        },
        '/:controller/:action' => {
            order => 103,
            to    => {

                #Ado::Control::Default
                controller => 'Default',
                action     => 'index'
            }
        },
        '/' => {
            order => -104,
            to    => {

                #Ado::Control::Default
                controller => 'Default',
                action     => 'index'
            }
        },

        # Normal UTF-8 route to template - used to check if app is alive.
        #See http://mojolicio.us/perldoc/Mojolicious/Guides/Routing#More_convenient_routes
        #See http:/localhost:3000/perldoc/Ado#load_routes
        #Note!: Put your specific routes sharing the same pattern like generic ones
        #before the generic ones!
        #e.g. /добре/ок before /:controler/:action
        # ($r->{/добре/ок}{order} < $r->{/:controler/:action}{order})
        '/добре/ок' => {
            order => 15,
            to    => {template => '/добре/ок'}
        },
        '/добре/ок/:foo' => {
            qrs   => {foo      => qr/нещо/i,},
            order => 14,
            to    => {template => '/добре/ок'}
        },

        # This route will not be considered at all
        'index' => undef,
    },

};

#Do not remove the line below.
#[CONFIG]

return $config;
